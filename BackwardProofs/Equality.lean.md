<pre class="alectryon-io type-info-hidden highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="alectryon-token"><span class="kn">import</span> Mathlib.Tactic.Basic</span></span></pre>

## Reasoning about Equality

Equality (`=`) is also a basic logical constant. It is characterized by the following
introduction and elimination rules:

```lean
Eq.refl : ∀a, a = a
Eq.symm : ?a = ?b → ?b = ?a
Eq.trans : ?a = ?b → ?b = ?c → ?a = ?c
Eq.subst : ?a = ?b → ?p ?a → ?p ?b
```

The first three lemmas are introduction rules specifying that `=` is an equivalence
relation. The fourth lemma is an elimination rule that allows us to replace equals
for equals in an arbitrary context, represented by the higher-order variable `?p`.

An example will show how this works. Below, we apply `Eq.subst` to rewrite
`f a b` to `f a' b`, using the equation `a = a'`:

<pre class="alectryon-io type-info-hidden highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="alectryon-token"><span class="kd">lemma</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cong_fst_arg</var><b>: </b><span>∀ {α : Type} (a a' b : α) (f : α → α → α), a = a' → f a b = f a' b</span></span></div></blockquote></div></small></div><span class="nv">cong_fst_arg</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span>Type 1</span></span></div></blockquote></div></small></div><span class="kt">Type</span></span><span class="alectryon-token">} (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a&#39;</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token">)
(</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span>α → α → α</span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token"> <span class="bp">→</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token"> <span class="bp">→</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ha</var><b>: </b><span>a = a'</span></span></div></blockquote></div></small></div><span class="nv">ha</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a</span></span><span class="alectryon-token"> <span class="bp">=</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a&#39;</span></span><span class="alectryon-token">) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span>α → α → α</span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b</span></span><span class="alectryon-token"> <span class="bp">=</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span>α → α → α</span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a&#39;</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b</span></span><span class="alectryon-token"> := </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chk0"><span class="alectryon-token"><span class="kd">by</span></span><span class="alectryon-token"></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a b <span class="bp">=</span> f a&#39; b</div></blockquote></div></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chk1"><span class="alectryon-token"><span class="k">apply</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Eq.subst</var><b>: </b><span>∀ {α : Type} {motive : α → Prop} {a b : α}, a = b → motive a → motive b</span></span></div></blockquote></div></small></div>Eq.subst</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ha</var><b>: </b><span>a = a'</span></span></div></blockquote></div></small></div><span class="nv">ha</span></span></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Error: tactic <span class="bp">&#39;</span>apply&#39; failed, failed to unify
  <span class="bp">?</span>m.33 a&#39;
<span class="k">with</span>
  f a b <span class="bp">=</span> f a&#39; b
α : <span class="kt">Type</span>
a a&#39; b : α
f : α <span class="bp">→</span> α <span class="bp">→</span> α
ha : a <span class="bp">=</span> a&#39;
<span class="bp">⊢</span> f a b <span class="bp">=</span> f a&#39; b</blockquote></div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a b <span class="bp">=</span> f a&#39; b</div></blockquote></div></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">
  </span><span class="alectryon-token"></span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chk2"><span class="alectryon-token"><span class="k">apply</span></span><span class="alectryon-token"> Eq.refl</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a b <span class="bp">=</span> f a&#39; b</div></blockquote></div></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

<span class="c1">-- BUGBUG doesn&#39;t work.</span></span></span></pre>

The `Eq.subst` instance we use has `?a := a`, `?b := a'`, and `?p := (λ x, f a b = f x b)`:
```lean
a = a' → (λx, f a b = f x b) a → (λx, f a b = f x b) a'
```
In β-reduced form:
```lean
a = a' → f a b = f a b → f a b = f a' b
```
The lemma's first assumption matches the hypothesis `ha : a = a'`, which is passed as an argument in the
first apply invocation. The lemma's second assumption is a trivial equality that can be proved by
apply `Eq.refl` or `rfl`. The lemma's conclusion matches the goal’s target. Notice how a higher-order
variable (e.g., `?p`) can represent an arbitrary context (e.g., `f . . . b`) around a term (e.g.,
`a` or `a'`). This works because `apply` unifies up to computation, including β-conversion.

The `Eq.subst` lemma can be applied several times in sequence, as follows:

<pre class="alectryon-io type-info-hidden highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="alectryon-token"><span class="kd">lemma</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cong_two_args</var><b>: </b><span>∀ {α : Type} (a a' b b' : α) (f : α → α → α), a = a' → b = b' → f a b = f a' b'</span></span></div></blockquote></div></small></div><span class="nv">cong_two_args</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span>Type 1</span></span></div></blockquote></div></small></div><span class="kt">Type</span></span><span class="alectryon-token">} (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a&#39;</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b&#39;</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span>α → α → α</span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token"> <span class="bp">→</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token"> <span class="bp">→</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ha</var><b>: </b><span>a = a'</span></span></div></blockquote></div></small></div><span class="nv">ha</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a</span></span><span class="alectryon-token"> <span class="bp">=</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a&#39;</span></span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hb</var><b>: </b><span>b = b'</span></span></div></blockquote></div></small></div><span class="nv">hb</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b</span></span><span class="alectryon-token"> <span class="bp">=</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b&#39;</span></span><span class="alectryon-token">) :
</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span>α → α → α</span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b</span></span><span class="alectryon-token"> <span class="bp">=</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span>α → α → α</span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a&#39;</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b&#39;</span></span><span class="alectryon-token"> := </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chk3"><span class="alectryon-token"><span class="kd">by</span></span><span class="alectryon-token"></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b, b'</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br><span><var>hb</var><span class="hyp-type"><b>: </b><span>b <span class="bp">=</span> b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a b <span class="bp">=</span> f a&#39; b&#39;</div></blockquote></div></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chk4"><span class="alectryon-token"><span class="k">apply</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Eq.subst</var><b>: </b><span>∀ {α : Type} {motive : α → Prop} {a b : α}, a = b → motive a → motive b</span></span></div></blockquote></div></small></div>Eq.subst</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ha</var><b>: </b><span>a = a'</span></span></div></blockquote></div></small></div><span class="nv">ha</span></span></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Error: tactic <span class="bp">&#39;</span>apply&#39; failed, failed to unify
  <span class="bp">?</span>m.93 a&#39;
<span class="k">with</span>
  f a b <span class="bp">=</span> f a&#39; b&#39;
α : <span class="kt">Type</span>
a a&#39; b b&#39; : α
f : α <span class="bp">→</span> α <span class="bp">→</span> α
ha : a <span class="bp">=</span> a&#39;
hb : b <span class="bp">=</span> b&#39;
<span class="bp">⊢</span> f a b <span class="bp">=</span> f a&#39; b&#39;</blockquote></div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b, b'</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br><span><var>hb</var><span class="hyp-type"><b>: </b><span>b <span class="bp">=</span> b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a b <span class="bp">=</span> f a&#39; b&#39;</div></blockquote></div></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">
  </span><span class="alectryon-token"></span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chk5"><span class="alectryon-token"><span class="k">apply</span></span><span class="alectryon-token"> Eq.subst hb
  </span><span class="alectryon-token"><span class="k">apply</span></span><span class="alectryon-token"> Eq.refl</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b, b'</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br><span><var>hb</var><span class="hyp-type"><b>: </b><span>b <span class="bp">=</span> b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a b <span class="bp">=</span> f a&#39; b&#39;</div></blockquote></div></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

<span class="c1">-- BUGBUG doesn&#39;t work.</span></span></span></pre>

Since rewriting in this way is such a common operation, Lean provides a `rw` tactic
to achieve the same result. The tactic will also notice if `rfl` is applicable:

<pre class="alectryon-io type-info-hidden highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="alectryon-token"><span class="kd">lemma</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cong_two_args₂</var><b>: </b><span>∀ {α : Type} (a a' b b' : α) (f : α → α → α), a = a' → b = b' → f a b = f a' b'</span></span></div></blockquote></div></small></div><span class="nv">cong_two_args₂</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span>Type 1</span></span></div></blockquote></div></small></div><span class="kt">Type</span></span><span class="alectryon-token">} (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a&#39;</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b&#39;</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span>α → α → α</span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token"> <span class="bp">→</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token"> <span class="bp">→</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>α</var><b>: </b><span>Type</span></span></div></blockquote></div></small></div><span class="nv">α</span></span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ha</var><b>: </b><span>a = a'</span></span></div></blockquote></div></small></div><span class="nv">ha</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a</span></span><span class="alectryon-token"> <span class="bp">=</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a&#39;</span></span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hb</var><b>: </b><span>b = b'</span></span></div></blockquote></div></small></div><span class="nv">hb</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b</span></span><span class="alectryon-token"> <span class="bp">=</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b&#39;</span></span><span class="alectryon-token">) :
</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span>α → α → α</span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b</span></span><span class="alectryon-token"> <span class="bp">=</span> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span>α → α → α</span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>a'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">a&#39;</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>b'</var><b>: </b><span>α</span></span></div></blockquote></div></small></div><span class="nv">b&#39;</span></span><span class="alectryon-token"> := </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chk6"><span class="alectryon-token"><span class="kd">by</span></span><span class="alectryon-token"></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b, b'</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br><span><var>hb</var><span class="hyp-type"><b>: </b><span>b <span class="bp">=</span> b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a b <span class="bp">=</span> f a&#39; b&#39;</div></blockquote></div></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chk7"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b, b'</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br><span><var>hb</var><span class="hyp-type"><b>: </b><span>b <span class="bp">=</span> b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a b <span class="bp">=</span> f a&#39; b&#39;</div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chk8"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ha</var><b>: </b><span>a = a'</span></span></div></blockquote></div></small></div><span class="nv">ha</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b, b'</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br><span><var>hb</var><span class="hyp-type"><b>: </b><span>b <span class="bp">=</span> b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a&#39; b <span class="bp">=</span> f a&#39; b&#39;</div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chk9"><span class="alectryon-token">]</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b, b'</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br><span><var>hb</var><span class="hyp-type"><b>: </b><span>b <span class="bp">=</span> b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a&#39; b <span class="bp">=</span> f a&#39; b&#39;</div></blockquote></div></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chka"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b, b'</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br><span><var>hb</var><span class="hyp-type"><b>: </b><span>b <span class="bp">=</span> b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a&#39; b <span class="bp">=</span> f a&#39; b&#39;</div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chkb"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>hb</var><b>: </b><span>b = b'</span></span></div></blockquote></div></small></div><span class="nv">hb</span></span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>α</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a', b, b'</var><span class="hyp-type"><b>: </b><span>α</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>α <span class="bp">→</span> α <span class="bp">→</span> α</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a <span class="bp">=</span> a&#39;</span></span></span><br><span><var>hb</var><span class="hyp-type"><b>: </b><span>b <span class="bp">=</span> b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a&#39; b&#39; <span class="bp">=</span> f a&#39; b&#39;</div></blockquote></div></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equality-lean-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equality-lean-chkc"><span class="alectryon-token">]</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Goals accomplished<span class="bp">!</span> <span class="bp">🐙</span></div></blockquote></div></div></small></span></pre>

A note on parsing: Equality binds more tightly than the logical connectives.
Thus, `a = a' ∧ b = b'` should be read as (a = a') ∧ (b = b').

